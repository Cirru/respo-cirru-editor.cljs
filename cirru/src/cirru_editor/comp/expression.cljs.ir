
[
[ "ns" "cirru-editor.comp.expression" [ ":require" [ "[]" "hsl.core" ":refer" [ "[]" "hsl" ] ] [ "[]" "respo.alias" ":refer" [ "[]" "create-comp" "div" ] ] [ "[]" "respo.comp.debug" ":refer" [ "[]" "comp-debug" ] ] [ "[]" "respo-border.transform.space" ":refer" [ "[]" "interpose-spaces" ] ] [ "[]" "cirru-editor.comp.token" ":refer" [ "[]" "comp-token" ] ] [ "[]" "cirru-editor.util.detect" ":refer" [ "[]" "coord-contains?" ] ] ] ]
[ "def" "style-expression" [ "{}" [ ":border-style" "|solid" ] [ ":border-color" [ "hsl" "0" "0" "100" "0.6" ] ] [ ":outline" "|none" ] [ ":padding" "|0px 8px" ] [ ":margin" "|4px 0" ] [ ":border-width" "|0 0 0 1px" ] ] ]
[ "declare" "comp-expression" ]
[ "defn" "on-click" [ "modify!" "coord" "focus" ] [ "fn" [ "e" "dispatch!" ] [ "if" [ "not=" "coord" "focus" ] [ "modify!" ":focus-to" "coord" ] ] ] ]
[ "defn" "render" [ "expression" "modify!" "coord" "level" "tail?" "focus" ] [ "fn" [ "state" "mutate!" ] [ "let" [ [ "tree" [ "div" [ "{}" [ ":style" [ "merge" "style-expression" [ "if" [ "and" "tail?" [ ">" "level" "1" ] ] [ "{}" [ ":display" "|inline-block" ] [ ":border-width" "|0 0 1px 0" ] [ ":padding" "|4px 4px" ] ] ] [ "if" [ "=" "coord" "focus" ] [ "{}" [ ":border-color" [ "hsl" "0" "0" "100" ] ] ] ] ] ] [ ":attrs" [ "merge" [ "{}" [ ":tab-index" "0" ] ] [ "if" [ "=" "coord" "focus" ] [ "{}" [ ":id" "|editor-focused" ] ] ] ] ] [ ":event" [ "{}" [ ":click" [ "on-click" "modify!" "coord" "focus" ] ] ] ] ] [ "let" [ [ "exp-size" [ "count" "expression" ] ] ] [ "->>" "expression" [ "map-indexed" [ "fn" [ "idx" "item" ] [ "[]" "idx" [ "let" [ [ "child-coord" [ "conj" "coord" "idx" ] ] [ "child-focus" [ "if" [ "coord-contains?" "focus" "child-coord" ] "focus" "nil" ] ] ] [ "if" [ "string?" "item" ] [ "comp-token" "item" "modify!" "child-coord" "child-focus" ] [ "comp-expression" "item" "modify!" "child-coord" [ "inc" "level" ] [ "=" [ "dec" "exp-size" ] "idx" ] "child-focus" ] ] ] ] ] ] ] ] ] ] ] [ "if" [ ">" "level" "0" ] [ "interpose-spaces" "tree" [ "{}" [ ":width" "|8px" ] [ ":display" "|inline-block" ] ] ] "tree" ] ] ] ]
[ "def" "comp-expression" [ "create-comp" ":expression" "render" ] ]
]
